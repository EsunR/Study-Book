# 1. Button 组件的开发

## 1.1 组件的 Props

创建一个 HelloWorld 组件，我们可以通过将 `props` 类型约束为一个 interface，就可以实现 props 在使用过程中的自动提示以及类型约束：

```tsx
import React from "react";

interface IHelloWorldProps {
  message: string;
}

const HelloWorld = (props: IHelloWorldProps) => {
  return <h2>{props.message}</h2>;
};

export default HelloWorld;
```

除此之外，React 中还提供了 `FunctionComponent` 接口：

```ts
interface FunctionComponent<P = {}> {
    (props: PropsWithChildren<P>, context?: any): ReactElement<any, any> | null;
    propTypes?: WeakValidationMap<P>;
    contextTypes?: ValidationMap<any>;
    defaultProps?: Partial<P>;
    displayName?: string;
}
```

我们可以将其使用在我们自己定义的 React 函数组件上，能实现 props 类型约束、默认 props 等功能：

```tsx
import React from "react";

interface IHelloWorldProps {
  message?: string;
}

const HelloWorld: React.FunctionComponent<IHelloWorldProps> = (props) => {
  return <h2>{props.message}</h2>;
};

// 为组件提供默认的 props
HelloWorld.defaultProps = {
  message: "Default Props",
};

export default HelloWorld;
```

> `FunctionComponent` 有一个类型别名为 `FC`，可以直接使用 `React.FC` 替代 `React.FunctionComponent`

## 1.2 为组件绑定原生的 DOM 属性

在编写组件时，我们可以为组件创建自定义的 props，但是同时组件本身还可能携带 DOM 的原生属性。如我们在封装一个 Button 按钮时，原生的 `<button>` 标签上包含了 `onclick` 属性与 `autoFocuse` 属性，如果我们想使用这些属性的话，可以这么操作：

```ts
// 自定义的 Button 组件属性，这些属性可能决定了我们封装的组件的样式等
interface IBaseButtonProps {
  className?: string;
  disabled?: boolean;
  size?: ButtonSize;
  buttonType?: ButtonType;
  children: React.ReactNode;
  href?: string;
}

// 定义 Type，其属性值是原生 button 标签的属性以及原生 a 标签的属性
type NativeButonProps = React.ButtonHTMLAttributes<HTMLElement>;
type NativeAchorProps = React.AnchorHTMLAttributes<HTMLElement>;

// 将 NativeAchorProps 与 NativeButonProps 的属性都转为可选属性，并与组件本身定义的基础属性进行交叉
export type ButtonProps = Partial<NativeAchorProps & NativeButonProps> &
  IBaseButtonProps;

const Button: React.FC<ButtonProps> = (props) => {
  const {
    className,
    disabled,
    size,
    buttonType,
    children,
    href,
    ...restProps // 接收剩余的类型
  } = props;

  // ... ...

  if (buttonType === ButtonType.Link) {
    return (
      // 传入参数
      <a className={classes} {...restProps} href={href ? href : "#"}>
        {children}
      </a>
    );
  } else {
    return (
      // 传入参数
      <button {...restProps} className={classes}>
        {children}
      </button>
    );
  }
};
```

这里用到了 ts 中的 [交叉类型](https://www.tslang.cn/docs/handbook/advanced-types.html) `&`，代表了定义的类型是两种类型的集合。

同时又使用了 ts 中的工具泛型（Utility Types） `Partial`，其可以将一种类型的各属性都转为可选参数。

## 